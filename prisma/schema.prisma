// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model OrderBook {
  id        String   @id @default(cuid())
  orderId   String   @unique
  metadata  Json
  side      String?
  price     Int?
  size      Int?
  userId    String?
  createdAt DateTime @default(now()) @db.Timestamp(6)
  updateAt  DateTime @updatedAt @db.Timestamp(6)

  @@map("orderBook")
}

model User {
  id          String   @id @default(cuid())
  safeAddress String   @unique
  userAddress String   @unique
  createdAt   DateTime @default(now()) @db.Timestamp(6)
  updateAt    DateTime @updatedAt @db.Timestamp(6)

  @@map("user")
}

model AuditLog {
  id        String   @id @default(cuid())
  tableName String
  recordId  String
  action    String
  changes   Json
  createdAt DateTime @default(now()) @db.Timestamp(6)

  @@map("auditLog")
}

model MarketData {
  id                          String   @id @default(cuid())
  symbol                      String
  name                        String
  image                       String
  current_price               Float
  market_cap                  Float?
  market_cap_rank             Int
  fully_diluted_valuation     Float?
  total_volume                Float?
  high_24h                    Float?
  low_24h                     Float?
  price_change_24h            Float?
  price_change_percentage_24h Float?
  market_cap_change_24h       Float?
  market_cap_change_percentage_24h Float?
  circulating_supply          Float?
  total_supply                Float?
  max_supply                  Float?
  ath                         Float?
  ath_change_percentage       Float?
  ath_date                    DateTime
  atl                         Float?
  atl_change_percentage       Float?
  atl_date                    DateTime
  last_updated                DateTime
  sparkline_in_7d             Float[] 
  createdAt                   DateTime @default(now()) @db.Timestamp(6)
  updatedAt                   DateTime @updatedAt @db.Timestamp(6)

  @@map("market_data")
}

model CoinData {
  id                                String   @id
  symbol                            String
  name                              String
  web_slug                          String?
  asset_platform_id                 String?
  platforms                         Json?
  detail_platforms                  Json?
  block_time_in_minutes             Int?
  hashing_algorithm                 String?
  categories                        String[]
  preview_listing                   Boolean?
  public_notice                     String?
  additional_notices                String[]
  localization                      Json
  description                       Json
  links                             Json
  image                             Json
  country_origin                    String?
  genesis_date                      DateTime?
  sentiment_votes_up_percentage     Float?
  sentiment_votes_down_percentage   Float?
  market_cap_rank                   Int?
  market_data                       Json?
  public_interest_stats             Json?
  last_updated                      DateTime
  status_updates                    Json?
  tickers                           Json?
  createdAt                         DateTime @default(now()) @db.Timestamp(6)
  updatedAt                         DateTime @updatedAt @db.Timestamp(6)

  @@map("single_coin_data")
}

